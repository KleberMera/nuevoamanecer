<div class="space-y-4 sm:space-y-6 w-full">
	<div class="flex items-center justify-between flex-wrap gap-3">
		@if (this._viewPort.isDesktop()) {
		<h2 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-100">
			Nomina de <span class="text-primary">pagos</span>
		</h2>
		}
	</div>

	<div class="grid grid-cols-1 sm:grid-cols-12 gap-3 sm:gap-4">
		<div class="sm:col-span-3 space-y-2">
			<label for="periodo" class="block text-sm font-semibold text-gray-100">
				Periodo
			</label>
			<p-select
				id="periodo"
				[formControl]="periodoControl"
				[options]="periodosList()"
				optionLabel="label"
				optionValue="value"
				placeholder="Seleccionar..."
				class="w-full"
				[showClear]="true"
			>
			</p-select>
		</div>
		<div class="sm:col-span-4 space-y-2">
			<label for="nombre" class="block text-sm font-semibold text-gray-100">
				Nombre completo
			</label>
			<input
				id="nombre"
				type="text"
				pInputText
				[formControl]="nombreControl"
				placeholder="Buscar por nombre..."
				class="w-full"
			/>
		</div>
		<div class="sm:col-span-3 space-y-2">
			<label for="estado" class="block text-sm font-semibold text-gray-100">
				Estado
			</label>
			<p-select
				id="estado"
				[formControl]="estadoControl"
				[options]="estadosList()"
				optionLabel="label"
				optionValue="value"
				placeholder="Seleccionar..."
				class="w-full"
				[showClear]="true"
			>
			</p-select>
		</div>
		<div class="sm:col-span-2 flex items-end">
			<button
				pButton
				type="button"
				label="PDF"
				icon="pi pi-file-pdf"
				class="p-button-outlined p-button-secondary w-full"
			></button>
		</div>
	</div>

	<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4">
		<div class="bg-surface-900 border border-surface-700 rounded-lg p-4 space-y-2">
			<p class="text-sm font-semibold text-gray-300">Registros</p>
			<p class="text-2xl font-bold text-blue-400">{{ detNominaFiltrada().length || 0 }}</p>
		</div>
		<div class="bg-surface-900 border border-surface-700 rounded-lg p-4 space-y-2">
			<p class="text-sm font-semibold text-gray-300">Total cuota</p>
			<p class="text-2xl font-bold text-green-400">{{ totalCuota() | currency }}</p>
		</div>
		<div class="bg-surface-900 border border-surface-700 rounded-lg p-4 space-y-2">
			<p class="text-sm font-semibold text-gray-300">Total capital</p>
			<p class="text-2xl font-bold text-primary">{{ totalCapital() | currency }}</p>
		</div>
		<div class="bg-surface-900 border border-surface-700 rounded-lg p-4 space-y-2">
			<p class="text-sm font-semibold text-gray-300">Total interes</p>
			<p class="text-2xl font-bold text-orange-400">{{ totalInteres() | currency }}</p>
		</div>
	</div>

	@if (hasError()) {
	<div class="flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg">
		<i class="pi pi-exclamation-triangle text-red-400 text-xl"></i>
		<div class="flex-1">
			<p class="text-red-400 font-semibold text-sm sm:text-base">Error al cargar</p>
			<p class="text-red-300 text-xs sm:text-sm">{{ errorMessage() }}</p>
		</div>
	</div>
	} @else if (isLoading()) {
	<div class="flex justify-center items-center py-16">
		<p-progressSpinner class="w-12 h-12" strokeWidth="4" animationDuration="1s">
		</p-progressSpinner>
	</div>
	} @else {
	<div class="space-y-6">
		<div class="border border-surface-700 rounded-lg shadow-xl">
			<div class="px-4 py-3 border-b border-surface-700">
				<h3 class="text-base sm:text-lg font-semibold text-gray-100">Detalle de pagos</h3>
			</div>
			<p-table
				showGridlines
				stripedRows
				[value]="detNominaFiltrada()"
				[rows]="10"
				[paginator]="true"
				[rowsPerPageOptions]="[10, 20, 50]"
				[showCurrentPageReport]="true"
				currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
				[tableStyle]="{ 'min-width': '60rem' }"
				[rowHover]="true"
				[scrollable]="true"
				scrollHeight="500px"
			>
				<ng-template pTemplate="header">
					<tr>
						<th class="bg-surface-800">Período</th>
						<th class="bg-surface-800">Mes</th>
						<th class="bg-surface-800">Nombre completo</th>
						<th class="bg-surface-800 text-right">Cuota</th>
						<th class="bg-surface-800 text-right">Capital</th>
						<th class="bg-surface-800 text-right">Interés</th>
						<th class="bg-surface-800">Estado</th>
						<th class="bg-surface-800">Cuota pagar</th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-det>
					<tr>
						<td class="text-gray-200">{{ det.periodo }}</td>
						<td class="text-gray-200">{{ det.mes }}</td>
						<td class="text-gray-200">{{ det.nombrecompleto }}</td>
						<td class="text-right text-primary font-semibold">{{ det.cuota | currency }}</td>
						<td class="text-right text-gray-200">{{ det.capital | currency }}</td>
						<td class="text-right text-gray-200">{{ det.interes | currency }}</td>
						<td>
							<p-tag [value]="det.estadopago" severity="info"></p-tag>
						</td>
						<td class="text-gray-200">{{ det.cuotapagar }}</td>
					</tr>
				</ng-template>
				<ng-template pTemplate="emptymessage">
					<tr>
						<td colspan="8" class="text-center py-8">
							<div class="flex flex-col items-center gap-3">
								<i class="pi pi-filter-slash text-3xl text-gray-500"></i>
								<p class="text-gray-400">No se encontraron pagos</p>
							</div>
						</td>
					</tr>
				</ng-template>
			</p-table>
		</div>
	</div>
	}
</div>
